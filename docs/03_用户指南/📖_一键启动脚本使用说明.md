# 房源数据分析与智能问答系统 - 一键启动脚本使用说明

## 📅 文档信息
- **创建时间**: 2025-07-02
- **版本**: v2.0
- **适用系统**: Windows 10/11
- **Python版本**: 3.8+

## 🎯 脚本概述

本项目提供了两个一键启动脚本，解决了编码问题并集成了1分钟爬虫功能：

### 1. 🚀_一键启动系统_2025_07_02.bat (Windows批处理版本)
- **优势**: 无需Python环境即可运行菜单
- **特点**: 解决了中文编码问题
- **适用**: Windows系统用户

### 2. 🚀_一键启动系统.py (Python版本)
- **优势**: 跨平台兼容，功能更丰富
- **特点**: 更好的错误处理和状态检查
- **适用**: 有Python环境的用户

## 🚀 启动模式说明

### [1] 完整启动 (推荐)
**功能**: MongoDB + Django + RAG + 1分钟爬虫
```
执行流程:
1. 启动MongoDB数据库服务
2. 启动Django Web服务器 (后台)
3. 验证RAG智能问答系统
4. 运行1分钟爬虫数据采集
5. 显示系统状态总结
```

**适用场景**: 
- 首次使用系统
- 完整功能演示
- 系统验证测试

### [2] 基础启动
**功能**: 仅启动 MongoDB + Django
```
执行流程:
1. 启动MongoDB数据库服务
2. 启动Django Web服务器 (前台)
```

**适用场景**:
- 日常开发使用
- 不需要爬虫功能
- 长时间运行服务器

### [3] 开发模式
**功能**: 启动系统 + 持续爬虫
```
执行流程:
1. 启动MongoDB数据库服务
2. 启动Django Web服务器 (后台)
3. 启动持续爬虫 (需手动停止)
```

**适用场景**:
- 数据采集需求
- 开发调试爬虫
- 大量数据收集

### [4] 测试模式
**功能**: 快速验证系统状态
```
执行流程:
1. 检查Python环境和依赖包
2. 检查MongoDB和MySQL状态
3. 检查Django项目文件
4. 显示检查结果
```

**适用场景**:
- 系统故障诊断
- 环境配置验证
- 快速状态检查

### [5] 爬虫专用
**功能**: 仅运行1分钟爬虫测试
```
执行流程:
1. 直接运行1分钟爬虫
2. 自动停止并显示结果
```

**适用场景**:
- 爬虫功能测试
- 数据采集验证
- 爬虫性能测试

## 🔧 使用方法

### 方法1: 使用批处理脚本 (推荐)
```bash
# 双击运行或命令行执行
🚀_一键启动系统_2025_07_02.bat
```

### 方法2: 使用Python脚本
```bash
# 命令行执行
python 🚀_一键启动系统.py
```

### 方法3: 系统状态检查
```bash
# 独立的系统检查
python 🔍_系统状态检查.py
```

## 📊 系统访问地址

启动完成后，可通过以下地址访问系统：

### 主要功能页面
- **🏠 MySQL版本**: http://127.0.0.1:8000/app/login/
- **🍃 MongoDB版本**: http://127.0.0.1:8000/mongo/login/
- **🤖 RAG智能问答**: http://127.0.0.1:8000/mongo/rag/

### 数据分析页面
- **📊 数据总览**: http://127.0.0.1:8000/mongo/tableData/
- **🗺️ 房源分布**: http://127.0.0.1:8000/mongo/houseDistribute/
- **☁️ 词云分析**: http://127.0.0.1:8000/mongo/housewordcloud/
- **💰 价格预测**: http://127.0.0.1:8000/mongo/predict-all-prices/

### 测试账户
- **用户名**: test4071741
- **密码**: 0515

## ⚠️ 注意事项

### 编码问题解决
1. **批处理脚本**: 已设置 `chcp 65001` 解决中文显示问题
2. **Python脚本**: 使用UTF-8编码，完全避免编码问题
3. **终端设置**: 建议使用Windows Terminal或PowerShell

### 系统要求
- **Python**: 3.8+ (推荐3.11+)
- **MongoDB**: 4.4+ 
- **MySQL**: 5.7+ (可选)
- **内存**: 建议4GB+
- **磁盘**: 建议2GB+可用空间

### 依赖包要求
```
django>=4.2.0
pymongo>=4.0.0
pymysql>=1.0.0
scrapy>=2.5.0
requests>=2.25.0
matplotlib>=3.5.0
pandas>=1.3.0
```

## 🔍 故障排除

### 常见问题

#### 1. MongoDB启动失败
**症状**: MongoDB连接失败
**解决方案**:
```bash
# 检查MongoDB服务
net start MongoDB

# 或手动启动
mongod --dbpath "C:\data\db" --noauth
```

#### 2. Django端口占用
**症状**: 端口8000被占用
**解决方案**:
```bash
# 查找占用进程
netstat -ano | findstr :8000

# 终止进程
taskkill /f /pid [进程ID]
```

#### 3. 依赖包缺失
**症状**: ImportError错误
**解决方案**:
```bash
# 安装依赖包
pip install -r requirements.txt

# 或单独安装
pip install django pymongo scrapy
```

#### 4. 爬虫启动失败
**症状**: Scrapy命令不存在
**解决方案**:
```bash
# 检查Scrapy安装
python -m scrapy version

# 重新安装
pip install scrapy
```

### 日志文件位置
- **Django日志**: `django.log`
- **Scrapy日志**: `scrapy_spider/logs/`
- **MongoDB日志**: MongoDB安装目录下的log文件

## 🛠️ 高级配置

### 自定义启动参数

#### 修改爬虫时间
在脚本中找到以下行并修改：
```python
# 1分钟爬虫改为2分钟
"-s", "CLOSESPIDER_TIMEOUT=120"  # 原来是60
```

#### 修改Django端口
```python
# 修改Django端口为8080
subprocess.run([sys.executable, 'manage.py', 'runserver', '8080'])
```

#### 修改MongoDB配置
```python
# 修改MongoDB连接参数
client = pymongo.MongoClient('mongodb://localhost:27017/')
```

### 环境变量配置
```bash
# 设置Python路径
set PYTHONPATH=%CD%

# 设置Django设置模块
set DJANGO_SETTINGS_MODULE=Python租房房源数据可视化分析.settings
```

## 📈 性能优化建议

### 1. 系统性能
- 关闭不必要的后台程序
- 确保足够的内存空间
- 使用SSD硬盘提升I/O性能

### 2. 数据库优化
- 定期清理MongoDB日志
- 优化MySQL查询索引
- 合理设置连接池大小

### 3. 爬虫优化
- 调整下载延迟避免被封
- 设置合理的并发数
- 使用代理池提升稳定性

## 📞 技术支持

### 联系方式
- **项目文档**: 查看 `docs/` 目录
- **问题反馈**: 查看 `issues/` 目录
- **更新日志**: 查看Git提交记录

### 相关文档
- `📝_新会话必读_项目状态总结_2025_07_02.md`
- `🔧_Git_Push操作全流程_2025_07_02.md`
- `📖_系统优化完成报告.md`

---

## 🎉 总结

一键启动脚本已完全解决编码问题，并集成了1分钟爬虫功能。用户可以根据需求选择不同的启动模式，系统会自动完成所有必要的初始化和验证工作。

**推荐使用流程**:
1. 首次使用选择 `[1] 完整启动`
2. 日常开发选择 `[2] 基础启动`
3. 故障排除选择 `[4] 测试模式`

祝您使用愉快！🚀
