# 🚀 房源数据分析系统 - 完整启动步骤

**更新时间**: 2025-06-30  
**适用版本**: MongoDB + MySQL 双数据库版本

---

## 📋 **启动前检查清单**

### **环境要求**
- ✅ Python 3.11.3
- ✅ Django 4.2.16
- ✅ MongoDB 服务
- ✅ 项目依赖包 (requirements.txt)

### **必要文件确认**
- ✅ `manage.py` 存在
- ✅ `requirements.txt` 存在
- ✅ `mongod_noauth.conf` 配置文件
- ✅ MongoDB数据目录 `C:\data\db`

---

## 🔧 **完整启动步骤**

### **步骤1：启动MongoDB服务**
```bash
# 方法1：使用批处理文件 (推荐)
双击运行: 启动MongoDB无认证.bat

# 方法2：手动命令
mongod --dbpath "C:\data\db" --noauth --bind_ip 127.0.0.1 --port 27017
```

**验证MongoDB启动**：
- 看到 "waiting for connections on port 27017" 表示成功
- 或运行：`python -c "from pymongo import MongoClient; print('MongoDB:', MongoClient().admin.command('ping'))"`

### **步骤2：启动Django服务器**
```bash
# 方法1：使用批处理文件 (推荐)
双击运行: 启动房源分析系统.bat

# 方法2：手动命令
cd "D:\Program Files\cursor-workpace\房源数据分析与价格预测"
python manage.py runserver
```

**验证Django启动**：
- 看到 "Starting development server at http://127.0.0.1:8000/" 表示成功
- 浏览器访问：http://127.0.0.1:8000

### **步骤3：验证系统功能**
1. **访问主页**：http://127.0.0.1:8000
2. **登录测试**：
   - MongoDB版：http://127.0.0.1:8000/mongo/login/
   - MySQL版：http://127.0.0.1:8000/app/login/
   - 测试账户：test4071741 / 0515

3. **功能验证**：
   - 数据总览页面
   - 图表显示正常
   - 导航菜单完整

---

## 🛠️ **手动重启项目**

### **完全重启流程**
1. **停止所有服务**
   ```bash
   # 停止Django (在运行窗口按 Ctrl+C 或 Ctrl+Break)
   # 停止MongoDB (在运行窗口按 Ctrl+C)
   ```

2. **清理进程** (如果需要)
   ```bash
   # 查找并结束相关进程
   tasklist | findstr python
   tasklist | findstr mongod
   
   # 强制结束 (替换PID)
   taskkill /F /PID <进程ID>
   ```

3. **重新启动**
   - 按照上述步骤1-3重新启动

### **快速重启** (服务正常时)
```bash
# 只重启Django (MongoDB保持运行)
# 在Django运行窗口按 Ctrl+C 停止
# 然后重新运行
python manage.py runserver
```

---

## 🔍 **常见问题排查**

### **MongoDB启动失败**
```bash
# 检查端口占用
netstat -ano | findstr :27017

# 检查数据目录权限
dir "C:\data\db"

# 清理锁文件 (如果存在)
del "C:\data\db\mongod.lock"
```

### **Django启动失败**
```bash
# 检查端口占用
netstat -ano | findstr :8000

# 检查Python环境
python --version
pip list | findstr Django

# 重新安装依赖
pip install -r requirements.txt
```

### **页面访问异常**
1. **检查服务状态**
   - MongoDB: 端口27017是否监听
   - Django: 端口8000是否监听

2. **检查防火墙设置**
   - 确保本地访问不被阻止

3. **清理浏览器缓存**
   - 强制刷新：Ctrl+F5

---

## 📊 **服务状态监控**

### **实时监控命令**
```bash
# 检查MongoDB连接
python -c "from pymongo import MongoClient; print('MongoDB状态:', MongoClient().admin.command('ping'))"

# 检查Django响应
curl http://127.0.0.1:8000/mongo/login/

# 检查端口监听
netstat -ano | findstr ":27017\|:8000"
```

### **日志查看**
- **Django日志**: 在运行窗口直接显示
- **MongoDB日志**: 在MongoDB运行窗口显示
- **错误日志**: 查看控制台输出

---

## 🎯 **启动成功标志**

### **MongoDB成功标志**
```
waiting for connections on port 27017
```

### **Django成功标志**
```
Starting development server at http://127.0.0.1:8000/
Quit the server with CTRL-BREAK.
```

### **系统功能正常标志**
- ✅ 登录页面正常显示
- ✅ 用户可以成功登录
- ✅ 图表数据正常加载
- ✅ 导航菜单功能完整

---

## 💡 **优化建议**

### **性能优化**
- 定期清理MongoDB日志
- 监控内存使用情况
- 优化数据库查询

### **稳定性提升**
- 设置MongoDB自动重启
- 配置Django错误处理
- 定期备份数据

**项目启动完成后，即可享受完整的房源数据分析功能！** 🚀
